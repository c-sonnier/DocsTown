<nav class="app-nav">
  <%= link_to root_path, class: "logo" do %>
    <img src="/docstown_logo.png" alt="DocsTown" style="height:50px;width:auto;">
  <% end %>

  <ul class="nav-links">
    <li><%= link_to "Tasks", tasks_path, class: ("active" if controller_name == "tasks" && !controller.class.module_parent_name) %></li>
    <% if Current.user %>
      <li><%= link_to "Dashboard", authenticated_root_path, class: ("active" if controller_name == "dashboards") %></li>
      <li><%= link_to "Settings", profile_path, class: ("active" if controller_name == "profiles") %></li>
      <% if Current.user.maintainer? || Current.user.admin? %>
        <li><%= link_to "Admin", admin_tasks_path, class: ("active" if controller.class.module_parent_name == "Admin") %></li>
      <% end %>
    <% end %>
  </ul>

  <div class="nav-user">
    <% if Current.user %>
      <% if Current.user.avatar_url.present? %>
        <div class="nav-avatar">
          <%= image_tag Current.user.avatar_url, alt: Current.user.github_username %>
        </div>
      <% end %>
      <span class="nav-username"><%= Current.user.github_username %></span>
      <%= button_to "Sign Out", logout_path, method: :delete, class: "nav-signout" %>
    <% else %>
      <%= button_to "Sign in with GitHub", "/auth/github", data: { turbo: false }, class: "btn btn-primary btn-sm" %>
    <% end %>
  </div>
</nav>
